'use babel';

const REPLACERS = [
  [/-{2}.*\r?\n+|\/\*.*\*\//g, ''],
  [/\r?\n+|\t+|\s+/g, ''],
  [/:/g, ' '],
  [/t/g, '$v1'],
  [/W/g, '$v2'],
  [/x([0-9A-F])([0-9A-F])/g, '(s($v1/(8000/$1)%7919*s($v1/(8000/$1)%7919)+$2)*0.5+0.5)'],
  [/e([0-9A-F])([0-9A-F])/g, 'pow(1-$v1%(8000/$1)/(8000/$1)\\,$2)'],
  [/i([0-9A-F])([0-9A-F])/g, 'pow($v1%(8000/$1)/(8000/$1)\\,$2)'],
  [/#([0-9A-F])([0-9A-F])/g, '(1+$v1/(8000/$1)%$2)'],
  [/X([0-9A-F])([0-9A-F])/g, 'I(1+$2*(s($v1/(8000/$1)%7919*s($v1/(8000/$1)%7919))*0.5+0.5))'],
  [/s/g, 'sin'],
  [/a/g, 'abs'],
  [/I/g, 'int'],
  [/A/g, '11'],
  [/B/g, '12'],
  [/C/g, '13'],
  [/D/g, '14'],
  [/E/g, '15'],
  [/F/g, '16']
];

export default function repl(code) {
  for (const replacer of REPLACERS) {
    code = code.replace(replacer[0], replacer[1]);
  }
  return code;
}
